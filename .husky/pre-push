# .husky/pre-push
# Version allegee - tests complets via npm run test:epic

echo "ğŸ” Pre-push: validation rapide..."

# Lint frontend uniquement
echo "Linting frontend..."
npm run lint --workspace=frontend || {
  echo "âŒ Lint failed!"
  exit 1
}

# Tests unitaires backend (rapides)
echo "Testing backend (unit)..."
npm run test --workspace=backend -- --testPathIgnorePatterns=integration || {
  echo "âŒ Backend unit tests failed!"
  exit 1
}

# Tests unitaires frontend (rapides)
echo "Testing frontend (unit)..."
npm run test --workspace=frontend -- --run || {
  echo "âŒ Frontend unit tests failed!"
  exit 1
}

echo "âœ… Pre-push validation passed!"
echo ""
echo "ğŸ’¡ Pour une validation complete avant push sur main:"
echo "   npm run test:epic"
